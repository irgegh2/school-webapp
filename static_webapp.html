<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–®–∫–æ–ª–∞ –ï–ì–≠ –∏ –û–ì–≠</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            padding: 16px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 16px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 16px;
        }
        
        .step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            margin: 0 4px;
        }
        
        .step.active {
            background: #667eea;
            color: white;
        }
        
        .step.completed {
            background: #10b981;
            color: white;
        }
        
        .step.inactive {
            background: #e5e7eb;
            color: #6b7280;
        }
        
        .step-line {
            width: 20px;
            height: 2px;
            background: #e5e7eb;
        }
        
        .card {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .card:hover, .card.selected {
            border-color: #667eea;
            background: var(--tg-theme-bg-color, #ffffff);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }
        
        .card-icon {
            font-size: 32px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .card-description {
            font-size: 14px;
            color: var(--tg-theme-hint-color, #6b7280);
            text-align: center;
            margin-bottom: 8px;
        }
        
        .card-price {
            font-size: 16px;
            font-weight: bold;
            color: #667eea;
            text-align: center;
        }
        
        .grid {
            display: grid;
            gap: 12px;
        }
        
        .grid-2 {
            grid-template-columns: 1fr 1fr;
        }
        
        .grid-1 {
            grid-template-columns: 1fr;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            margin-top: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .order-summary {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }
        
        .order-summary h3 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 12px;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .price-total {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            margin: 20px 0;
        }
        
        .price-total .amount {
            font-size: 24px;
            font-weight: bold;
        }
        
        .checkbox-container {
            display: flex;
            align-items: center;
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .checkbox-container input {
            margin-right: 12px;
            width: 20px;
            height: 20px;
        }
        
        .contact-input {
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            border: 2px solid #e5e7eb;
            font-size: 16px;
            margin: 16px 0;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }
        
        .contact-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .benefits {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 12px;
            padding: 16px;
            margin: 16px 0;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .success-screen {
            text-align: center;
            padding: 40px 16px;
        }
        
        .success-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .back-btn {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            color: var(--tg-theme-text-color, #000000);
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            margin-top: 16px;
            cursor: pointer;
        }

        .telegram-contact {
            background: #0088cc;
            color: white;
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéì –®–∫–æ–ª–∞ –ï–ì–≠ –∏ –û–ì–≠</h1>
        <p>–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏</p>
    </div>

    <div class="step-indicator">
        <div class="step active" id="step1">1</div>
        <div class="step-line"></div>
        <div class="step inactive" id="step2">2</div>
        <div class="step-line"></div>
        <div class="step inactive" id="step3">3</div>
        <div class="step-line"></div>
        <div class="step inactive" id="step4">4</div>
        <div class="step-line"></div>
        <div class="step inactive" id="step5">5</div>
    </div>

    <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä —ç–∫–∑–∞–º–µ–Ω–∞ -->
    <div id="exam-section" class="section active">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold;">–í—ã–±–µ—Ä–∏—Ç–µ —ç–∫–∑–∞–º–µ–Ω</h2>
            <div class="grid grid-2">
                <div class="card" onclick="selectExam('ege')">
                    <div class="card-icon">üéì</div>
                    <div class="card-title">–ï–ì–≠</div>
                    <div class="card-description">11 –∫–ª–∞—Å—Å</div>
                </div>
                <div class="card" onclick="selectExam('oge')">
                    <div class="card-icon">üìö</div>
                    <div class="card-title">–û–ì–≠</div>
                    <div class="card-description">9 –∫–ª–∞—Å—Å</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ -->
    <div id="subject-section" class="section">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold;">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç</h2>
            <div id="subjects-container" class="grid grid-1">
                <!-- –ü—Ä–µ–¥–º–µ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <button class="back-btn" onclick="goToStep('exam-section', 1)">‚óÄÔ∏è –ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- –®–∞–≥ 3: –í—ã–±–æ—Ä –∫—É—Ä—Å–∞ -->
    <div id="course-section" class="section">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold;">–í—ã–±–µ—Ä–∏—Ç–µ –∫—É—Ä—Å</h2>
            <div class="grid grid-1">
                <div class="card" onclick="selectCourse('–ª–µ—Ç–Ω—è—è_—à–∫–æ–ª–∞')">
                    <div class="card-icon">‚òÄÔ∏è</div>
                    <div class="card-title">–õ–µ—Ç–Ω—è—è —à–∫–æ–ª–∞</div>
                    <div class="card-description">–ò—é–ª—å-–∞–≤–≥—É—Å—Ç</div>
                    <div class="card-price">–æ—Ç 5000‚ÇΩ/–º–µ—Å</div>
                </div>
                <div class="card" onclick="selectCourse('–≥–æ–¥–æ–≤–æ–π_–∫—É—Ä—Å')">
                    <div class="card-icon">üìÖ</div>
                    <div class="card-title">–ì–æ–¥–æ–≤–æ–π –∫—É—Ä—Å</div>
                    <div class="card-description">–°–µ–Ω—Ç—è–±—Ä—å-–º–∞–π</div>
                    <div class="card-price">–æ—Ç 3500‚ÇΩ/–º–µ—Å</div>
                </div>
                <div class="card" onclick="selectCourse('–∏–Ω—Ç–µ–Ω—Å–∏–≤')">
                    <div class="card-icon">‚ö°</div>
                    <div class="card-title">–ò–Ω—Ç–µ–Ω—Å–∏–≤</div>
                    <div class="card-description">2 –Ω–µ–¥–µ–ª–∏ –≤ –º–∞–µ</div>
                    <div class="card-price">7500‚ÇΩ</div>
                </div>
            </div>
            <button class="back-btn" onclick="goToStep('subject-section', 2)">‚óÄÔ∏è –ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- –®–∞–≥ 4: –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ -->
    <div id="period-section" class="section">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold;">–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥</h2>
            <div id="periods-container" class="grid grid-1">
                <!-- –ü–µ—Ä–∏–æ–¥—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <button class="back-btn" onclick="goToStep('course-section', 3)">‚óÄÔ∏è –ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- –®–∞–≥ 5: –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ -->
    <div id="payment-section" class="section">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
            
            <div class="order-summary">
                <h3>üìã –í–∞—à –≤—ã–±–æ—Ä:</h3>
                <div id="order-details"></div>
            </div>

            <div class="benefits">
                <h3 style="margin-bottom: 12px;">‚ú® –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:</h3>
                <div id="course-benefits-text"></div>
            </div>

            <div id="curator-option" class="checkbox-container">
                <input type="checkbox" id="curator-checkbox">
                <div>
                    <div style="font-weight: bold;">üë®‚Äçüè´ –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä–∞—Ç–æ—Ä–∞</div>
                    <div style="font-size: 12px; color: var(--tg-theme-hint-color, #6b7280);">
                        –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ +<span id="curator-price">350</span>‚ÇΩ
                    </div>
                </div>
            </div>

            <input type="text" id="contact-input" class="contact-input" 
                   placeholder="–í–∞—à Telegram –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω">

            <div class="price-total">
                <div>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</div>
                <div class="amount" id="total-price">0‚ÇΩ</div>
            </div>

            <div class="telegram-contact">
                <h3 style="margin-bottom: 8px;">üìû –°–≤—è–∑—å —Å –Ω–∞–º–∏:</h3>
                <p>–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –º—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏ –æ–ø–ª–∞—Ç—ã.</p>
                <p style="margin-top: 8px;"><strong>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: @irgegh</strong></p>
            </div>

            <button id="order-btn" class="btn-primary" onclick="createOrder()">
                üìû –°–≤—è–∑–∞—Ç—å—Å—è –¥–ª—è –æ–ø–ª–∞—Ç—ã
            </button>
            
            <button class="back-btn" onclick="goToStep('period-section', 4)">‚óÄÔ∏è –ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞ -->
    <div id="success-section" class="section">
        <div class="success-screen">
            <div class="success-icon">üéâ</div>
            <h2 style="font-size: 24px; margin-bottom: 16px; color: #10b981;">–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</h2>
            <p style="margin-bottom: 20px; color: var(--tg-theme-hint-color, #6b7280);">
                –í–∞—à–∞ –∑–∞—è–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä @irgegh —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
            </p>
            <button class="btn-primary" onclick="location.reload()">
                –û—Ñ–æ—Ä–º–∏—Ç—å –µ—â–µ –∑–∞–∫–∞–∑
            </button>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–æ–≤ (—Å—Ç–∞—Ç–∏—á–Ω—ã–µ)
        const SUBJECTS = {
            'ege': {
                '–∏—Å—Ç–æ—Ä–∏—è': { name: '–ò—Å—Ç–æ—Ä–∏—è', emoji: 'üìú', description: '–£–≥–ª—É–±–ª–µ–Ω–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏' },
                '—Ä—É—Å—Å–∫–∏–π': { name: '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫', emoji: 'üìù', description: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É –∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ' },
                '–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞': { name: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', emoji: 'üî¢', description: '–ü—Ä–æ—Ñ–∏–ª—å–Ω–∞—è –∏ –±–∞–∑–æ–≤–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞' },
                '–æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ': { name: '–û–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏–µ', emoji: 'üèõÔ∏è', description: '–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ –æ–±—â–µ—Å—Ç–≤–æ–∑–Ω–∞–Ω–∏—é' }
            },
            'oge': {
                '–∏—Å—Ç–æ—Ä–∏—è': { name: '–ò—Å—Ç–æ—Ä–∏—è', emoji: 'üìú', description: '–ò—Å—Ç–æ—Ä–∏—è –†–æ—Å—Å–∏–∏ –¥–ª—è 9 –∫–ª–∞—Å—Å–∞' },
                '—Ä—É—Å—Å–∫–∏–π': { name: '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫', emoji: 'üìù', description: '–†—É—Å—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è –û–ì–≠' },
                '–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞': { name: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', emoji: 'üî¢', description: '–ê–ª–≥–µ–±—Ä–∞ –∏ –≥–µ–æ–º–µ—Ç—Ä–∏—è –¥–ª—è –û–ì–≠' },
                '—Ñ–∏–∑–∏–∫–∞': { name: '–§–∏–∑–∏–∫–∞', emoji: '‚öõÔ∏è', description: '–§–∏–∑–∏–∫–∞ –¥–ª—è 9 –∫–ª–∞—Å—Å–∞' }
            }
        };

        const COURSES = {
            '–ª–µ—Ç–Ω—è—è_—à–∫–æ–ª–∞': {
                name: '–õ–µ—Ç–Ω—è—è —à–∫–æ–ª–∞',
                months: ['–∏—é–ª—å', '–∞–≤–≥—É—Å—Ç'],
                price_per_month: 5000,
                price_full: 8000,
                benefits: '‚úÖ –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞ –ª–µ—Ç–æ\n‚úÖ –†–∞–∑–±–æ—Ä –≤—Å–µ—Ö —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ–º\n‚úÖ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å\n‚úÖ –õ–∏—á–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è\n‚úÖ –î–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –Ω–∞–≤—Å–µ–≥–¥–∞\n‚úÖ –ú–∏–Ω–∏-–≥—Ä—É–ø–ø—ã –¥–æ 15 —á–µ–ª–æ–≤–µ–∫\n‚úÖ –ì–∏–±–∫–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ'
            },
            '–≥–æ–¥–æ–≤–æ–π_–∫—É—Ä—Å': {
                name: '–ì–æ–¥–æ–≤–æ–π –∫—É—Ä—Å',
                months: ['—Å–µ–Ω—Ç—è–±—Ä—å', '–æ–∫—Ç—è–±—Ä—å', '–Ω–æ—è–±—Ä—å', '–¥–µ–∫–∞–±—Ä—å', '—è–Ω–≤–∞—Ä—å', '—Ñ–µ–≤—Ä–∞–ª—å', '–º–∞—Ä—Ç', '–∞–ø—Ä–µ–ª—å', '–º–∞–π'],
                price_per_month: 3500,
                price_full: 28000,
                benefits: '‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã\n‚úÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è\n‚úÖ –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π\n‚úÖ –ü—Ä–æ–±–Ω—ã–µ —ç–∫–∑–∞–º–µ–Ω—ã –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü\n‚úÖ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n‚úÖ –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∑–∞–ø–∏—Å—è–º\n‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ —Å–∞–º–æ–≥–æ —ç–∫–∑–∞–º–µ–Ω–∞\n‚úÖ –†–∞–±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤'
            },
            '–∏–Ω—Ç–µ–Ω—Å–∏–≤': {
                name: '–ò–Ω—Ç–µ–Ω—Å–∏–≤',
                price: 7500,
                benefits: '‚úÖ –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞ 2 –Ω–µ–¥–µ–ª–∏\n‚úÖ –†–∞–∑–±–æ—Ä —Ç–∏–ø–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π —ç–∫–∑–∞–º–µ–Ω–∞\n‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á\n‚úÖ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω—É\n‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏\n‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n‚úÖ –†–∞–±–æ—Ç–∞ —Å —ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω—ã–º —Å—Ç—Ä–µ—Å—Å–æ–º'
            }
        };

        const CURATOR_PRICE = 350;

        // Telegram Web App API
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.MainButton.hide();
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let selectedExam = '';
        let selectedSubject = '';
        let selectedCourse = '';
        let selectedPeriod = '';
        let currentStep = 1;

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        function updateSteps(step) {
            currentStep = step;
            for (let i = 1; i <= 5; i++) {
                const stepEl = document.getElementById(`step${i}`);
                stepEl.className = 'step ';
                if (i < step) {
                    stepEl.className += 'completed';
                } else if (i === step) {
                    stepEl.className += 'active';
                } else {
                    stepEl.className += 'inactive';
                }
            }
        }

        function goToStep(sectionId, step) {
            showSection(sectionId);
            updateSteps(step);
        }

        // –®–∞–≥ 1: –í—ã–±–æ—Ä —ç–∫–∑–∞–º–µ–Ω–∞
        function selectExam(examType) {
            selectedExam = examType;
            loadSubjects(examType);
            goToStep('subject-section', 2);
        }

        // –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        function loadSubjects(examType) {
            const subjects = SUBJECTS[examType];
            const container = document.getElementById('subjects-container');
            container.innerHTML = '';
            
            Object.entries(subjects).forEach(([key, subject]) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => selectSubject(key);
                
                card.innerHTML = `
                    <div class="card-icon">${subject.emoji}</div>
                    <div class="card-title">${subject.name}</div>
                    <div class="card-description">${subject.description}</div>
                `;
                
                container.appendChild(card);
            });
        }

        // –®–∞–≥ 3: –í—ã–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞
        function selectSubject(subjectKey) {
            selectedSubject = subjectKey;
            goToStep('course-section', 3);
        }

        // –®–∞–≥ 4: –í—ã–±–æ—Ä –∫—É—Ä—Å–∞
        function selectCourse(courseType) {
            selectedCourse = courseType;
            
            if (courseType === '–∏–Ω—Ç–µ–Ω—Å–∏–≤') {
                selectedPeriod = '–∏–Ω—Ç–µ–Ω—Å–∏–≤';
                showPayment();
            } else {
                loadPeriods(courseType);
                goToStep('period-section', 4);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–∏–æ–¥–æ–≤
        function loadPeriods(courseType) {
            const courseInfo = COURSES[courseType];
            const container = document.getElementById('periods-container');
            container.innerHTML = '';
            
            if (courseType === '–ª–µ—Ç–Ω—è—è_—à–∫–æ–ª–∞') {
                const periods = [
                    { key: '–∏—é–ª—å', name: 'üåû –ò—é–ª—å', price: courseInfo.price_per_month },
                    { key: '–∞–≤–≥—É—Å—Ç', name: 'üåª –ê–≤–≥—É—Å—Ç', price: courseInfo.price_per_month },
                    { key: '–ø–æ–ª–Ω–æ—Å—Ç—å—é', name: 'üéØ –û–±–∞ –º–µ—Å—è—Ü–∞', price: courseInfo.price_full, 
                      discount: (courseInfo.price_per_month * 2) - courseInfo.price_full }
                ];
                
                periods.forEach(period => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.onclick = () => selectPeriod(period.key);
                    
                    const discountText = period.discount ? `<div style="color: #10b981; font-size: 12px;">–°–∫–∏–¥–∫–∞: ${period.discount}‚ÇΩ</div>` : '';
                    
                    card.innerHTML = `
                        <div class="card-title">${period.name}</div>
                        <div class="card-price">${period.price}‚ÇΩ</div>
                        ${discountText}
                    `;
                    
                    container.appendChild(card);
                });
            } else if (courseType === '–≥–æ–¥–æ–≤–æ–π_–∫—É—Ä—Å') {
                // –ü–æ–ª–Ω—ã–π –∫—É—Ä—Å
                const fullCard = document.createElement('div');
                fullCard.className = 'card';
                fullCard.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                fullCard.style.color = 'white';
                fullCard.onclick = () => selectPeriod('–ø–æ–ª–Ω–æ—Å—Ç—å—é');
                
                const discount = (courseInfo.price_per_month * courseInfo.months.length) - courseInfo.price_full;
                
                fullCard.innerHTML = `
                    <div class="card-title">üéØ –ü–æ–ª–Ω—ã–π –∫—É—Ä—Å</div>
                    <div class="card-price" style="color: white;">${courseInfo.price_full}‚ÇΩ</div>
                    <div style="font-size: 12px; opacity: 0.9;">–°–∫–∏–¥–∫–∞: ${discount}‚ÇΩ</div>
                `;
                
                container.appendChild(fullCard);
                
                // –û—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Å—è—Ü—ã
                courseInfo.months.forEach(month => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.onclick = () => selectPeriod(month);
                    
                    card.innerHTML = `
                        <div class="card-title">üìÖ ${month.charAt(0).toUpperCase() + month.slice(1)}</div>
                        <div class="card-price">${courseInfo.price_per_month}‚ÇΩ</div>
                    `;
                    
                    container.appendChild(card);
                });
            }
        }

        // –®–∞–≥ 5: –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞
        function selectPeriod(period) {
            selectedPeriod = period;
            showPayment();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –æ–ø–ª–∞—Ç—É
        function showPayment() {
            goToStep('payment-section', 5);
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
            const examName = selectedExam === 'ege' ? '–ï–ì–≠' : '–û–ì–≠';
            const subjectName = SUBJECTS[selectedExam][selectedSubject].name;
            
            document.getElementById('order-details').innerHTML = `
                <div class="order-item"><span>üìã –≠–∫–∑–∞–º–µ–Ω:</span><span>${examName}</span></div>
                <div class="order-item"><span>üìö –ü—Ä–µ–¥–º–µ—Ç:</span><span>${subjectName}</span></div>
                <div class="order-item"><span>üìÖ –ö—É—Ä—Å:</span><span>${selectedCourse.replace('_', ' ')}</span></div>
                <div class="order-item"><span>üóì –ü–µ—Ä–∏–æ–¥:</span><span>${selectedPeriod}</span></div>
            `;
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
            const benefits = COURSES[selectedCourse].benefits;
            document.getElementById('course-benefits-text').innerHTML = benefits.replace(/\n/g, '<br>');
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫—É—Ä–∞—Ç–æ—Ä–∞
            const curatorOption = document.getElementById('curator-option');
            if (selectedCourse === '–∏–Ω—Ç–µ–Ω—Å–∏–≤') {
                curatorOption.style.display = 'none';
            } else {
                curatorOption.style.display = 'flex';
                
                let curatorPrice = CURATOR_PRICE;
                if (selectedPeriod === '–ø–æ–ª–Ω–æ—Å—Ç—å—é') {
                    const monthsCount = COURSES[selectedCourse].months.length;
                    curatorPrice = CURATOR_PRICE * monthsCount;
                }
                
                document.getElementById('curator-price').textContent = curatorPrice;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É
            updateTotalPrice();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫—É—Ä–∞—Ç–æ—Ä–∞
            document.getElementById('curator-checkbox').addEventListener('change', updateTotalPrice);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã
        function updateTotalPrice() {
            let basePrice = 0;
            
            if (selectedCourse === '–∏–Ω—Ç–µ–Ω—Å–∏–≤') {
                basePrice = COURSES[selectedCourse].price;
            } else {
                const courseInfo = COURSES[selectedCourse];
                if (selectedPeriod === '–ø–æ–ª–Ω–æ—Å—Ç—å—é') {
                    basePrice = courseInfo.price_full;
                } else {
                    basePrice = courseInfo.price_per_month;
                }
            }
            
            let curatorPrice = 0;
            if (selectedCourse !== '–∏–Ω—Ç–µ–Ω—Å–∏–≤' && document.getElementById('curator-checkbox').checked) {
                curatorPrice = parseInt(document.getElementById('curator-price').textContent);
            }
            
            const totalPrice = basePrice + curatorPrice;
            document.getElementById('total-price').textContent = `${totalPrice}‚ÇΩ`;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        function createOrder() {
            const contact = document.getElementById('contact-input').value.trim();
            
            if (!contact) {
                if (tg) {
                    tg.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é');
                } else {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é');
                }
                return;
            }
            
            const orderBtn = document.getElementById('order-btn');
            orderBtn.disabled = true;
            orderBtn.textContent = '–û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Telegram
            const examName = selectedExam === 'ege' ? '–ï–ì–≠' : '–û–ì–≠';
            const subjectName = SUBJECTS[selectedExam][selectedSubject].name;
            const withCurator = document.getElementById('curator-checkbox').checked;
            const totalPrice = document.getElementById('total-price').textContent;
            
            const orderMessage = `üõí –ù–û–í–´–ô –ó–ê–ö–ê–ó –° –°–ê–ô–¢–ê

üìã –≠–∫–∑–∞–º–µ–Ω: ${examName}
üìö –ü—Ä–µ–¥–º–µ—Ç: ${subjectName}
üìÖ –ö—É—Ä—Å: ${selectedCourse.replace('_', ' ')}
üóì –ü–µ—Ä–∏–æ–¥: ${selectedPeriod}
üë®‚Äçüè´ –ö—É—Ä–∞—Ç–æ—Ä: ${withCurator ? '–î–∞' : '–ù–µ—Ç'}
üí∞ –ò—Ç–æ–≥–æ: ${totalPrice}

üìû –ö–æ–Ω—Ç–∞–∫—Ç: ${contact}

#–∑–∞–∫–∞–∑ #${selectedExam} #${selectedSubject}`;

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∞–¥–º–∏–Ω—É
            localStorage.setItem('newOrder', JSON.stringify({
                exam: examName,
                subject: subjectName,
                course: selectedCourse,
                period: selectedPeriod,
                curator: withCurator,
                price: totalPrice,
                contact: contact,
                message: orderMessage
            }));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω —É—Å–ø–µ—Ö–∞
            setTimeout(() => {
                goToStep('success-section', 5);
                orderBtn.disabled = false;
                orderBtn.textContent = 'üìû –°–≤—è–∑–∞—Ç—å—Å—è –¥–ª—è –æ–ø–ª–∞—Ç—ã';
                
                if (tg) {
                    tg.showAlert('–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏.');
                }
            }, 1000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ');
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã Telegram
            if (tg && tg.themeParams) {
                document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color);
                document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color);
                document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color);
                document.documentElement.style.setProperty('--tg-theme-secondary-bg-color', tg.themeParams.secondary_bg_color);
            }
        });
    </script>
</body>
</html>
